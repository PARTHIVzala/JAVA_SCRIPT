<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Guess The Number</title>
<style>
  :root{
    --bg:#f3f7fb; --card:#ffffff; --accent:#5b8def; --accent-2:#6ad3b7;
    --danger:#f76c6c; --muted:#7d8aa3; --glass: rgba(255,255,255,0.6);
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    font-family:Inter,system-ui,Segoe UI,Roboto,Arial;
    background: linear-gradient(135deg,#5492e9 0%, #f4fbf8 100%);
    padding:24px;
    color:#233;
  }

  .card{
    width:100%;
    max-width:480px;
    background:var(--card);
    border-radius:14px;
    box-shadow:0 10px 30px rgba(37,63,97,0.12);
    padding:26px;
    text-align:center;
  }

  h1{
    margin:0 0 8px;
    font-size:22px;
    color:#123;
  }
  p.lead{
    margin:0 0 18px;
    color:var(--muted);
    font-size:14px;
  }

  .range-info{
    display:flex;
    justify-content:space-between;
    gap:12px;
    margin-bottom:14px;
    align-items:center;
  }
  .range-chip{
    background:linear-gradient(180deg,var(--glass),#fff);
    padding:8px 12px;
    border-radius:999px;
    font-weight:600;
    font-size:13px;
    color:#1b3;
    border:1px solid rgba(0,0,0,0.04);
  }

  .controls{
    display:flex;
    gap:12px;
    align-items:center;
    justify-content:center;
    margin-bottom:16px;
  }
  input[type="number"]{
    width:140px;
    padding:12px 14px;
    border-radius:10px;
    border:1px solid #e3e8f0;
    font-size:16px;
    outline:none;
    box-shadow:inset 0 1px 0 rgba(255,255,255,0.6);
  }
  input[type="number"]:focus{box-shadow:0 0 0 4px rgba(91,141,239,0.08);border-color:var(--accent)}

  button.btn{
    padding:11px 16px;
    border-radius:10px;
    border:none;
    cursor:pointer;
    font-weight:700;
    font-size:14px;
    color:white;
    background:linear-gradient(180deg,var(--accent),#3f6fe7);
    box-shadow:0 6px 18px rgba(91,141,239,0.18);
    transition:transform .14s ease, box-shadow .14s ease;
  }
  button.btn.secondary{
    background:transparent;
    color:#3b4b6a;
    border:1px solid #e6eefc;
    box-shadow:none;
    font-weight:600;
  }
  button.btn:active{transform:translateY(1px)}

  .status{
    min-height:48px;
    display:flex;
    align-items:center;
    justify-content:center;
    gap:12px;
    padding:10px 12px;
    border-radius:10px;
    margin-bottom:16px;
    border:1px dashed transparent;
  }

  .message{
    font-weight:700;
    font-size:15px;
  }
  .hint{font-size:13px;color:var(--muted);}

  .meter{
    height:10px;
    width:100%;
    background:#eef4ff;
    border-radius:999px;
    overflow:hidden;
    margin-top:12px;
    box-shadow:inset 0 1px 0 rgba(255,255,255,0.6);
  }
  .meter > i{
    display:block;
    height:100%;
    width:0%;
    background:linear-gradient(90deg,var(--accent),var(--accent-2));
    transition:width .35s ease;
  }

  .footer{
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:10px;
    margin-top:18px;
    color:var(--muted);
    font-size:13px;
  }

  .small{
    font-size:12px;color:var(--muted);
  }

  @media (max-width:420px){
    .controls{flex-direction:column}
    input[type="number"]{width:100%}
    .range-info{flex-direction:column;align-items:center}
  }
</style>
</head>
<body>
  <div class="card" role="application" aria-labelledby="title">
    <h1 id="title">Guess The Number</h1>
    <p class="lead">I'm thinking of a number. Try to guess it! Range and attempts are shown below.</p>

    <div class="range-info" aria-hidden="false">
      <div class="range-chip">Range: <strong id="rangeText">1 - 20</strong></div>
      <div class="range-chip">Attempts left: <strong id="attemptsText">10</strong></div>
    </div>

    <div class="controls" role="group" aria-label="Guess controls">
      <input id="guessInput" type="number" min="1" max="100" placeholder="Enter guess" aria-label="Guess input">
      <button class="btn" id="checkBtn">Check</button>
      <button class="btn secondary" id="newBtn" title="Start new game">New Game</button>
    </div>

    <div class="status" id="status" aria-live="polite">
      <div>
        <div class="message" id="message">Good luck! 🎯</div>
        <div class="hint" id="hint">Make a guess between 1 and 100.</div>
        <div class="meter" title="Progress to correct guess">
          <i id="meterFill"></i>
        </div>
      </div>
    </div>

    <div class="footer">
      <div class="small">Highscore: <strong id="highscore">0</strong></div>
      <div class="small">Range adjust:
        <input id="minRange" type="number" value="1" style="width:64px;padding:6px;border-radius:6px;border:1px solid #e7eefc;margin-left:8px">
        <input id="maxRange" type="number" value="100" style="width:64px;padding:6px;border-radius:6px;border:1px solid #e7eefc;margin-left:6px">
        <button id="applyRange" class="btn secondary" style="padding:6px 10px;margin-left:8px">Apply</button>
      </div>
    </div>
  </div>

<script>
  (function(){
    const guessInput = document.getElementById('guessInput');
    const checkBtn = document.getElementById('checkBtn');
    const newBtn = document.getElementById('newBtn');
    const messageEl = document.getElementById('message');
    const hintEl = document.getElementById('hint');
    const meterFill = document.getElementById('meterFill');
    const attemptsText = document.getElementById('attemptsText');
    const rangeText = document.getElementById('rangeText');
    const highscoreEl = document.getElementById('highscore');
    const minRangeInput = document.getElementById('minRange');
    const maxRangeInput = document.getElementById('maxRange');
    const applyRangeBtn = document.getElementById('applyRange');

    let min = 1, max = 100;
    let secret = randomBetween(min, max);
    let maxAttempts = 10;
    let attemptsLeft = maxAttempts;
    let highscore = 0;

    function randomBetween(a,b){
      a = Math.ceil(a); b = Math.floor(b);
      return Math.floor(Math.random() * (b - a + 1)) + a;
    }

    function resetGame(initAttempts){
      attemptsLeft = initAttempts || 10;
      secret = randomBetween(min, max);
      attemptsText.textContent = attemptsLeft;
      rangeText.textContent = `${min} - ${max}`;
      messageEl.textContent = 'New game started. Good luck! 🎲';
      hintEl.textContent = `Guess a number between ${min} and ${max}.`;
      meterFill.style.width = '0%';
      guessInput.value = '';
      guessInput.focus();
    }

    function updateMeter(guess){
      // meter shows proximity to secret (0% far, 100% exact)
      const dist = Math.abs(secret - guess);
      const maxDist = Math.max(Math.abs(secret - min), Math.abs(secret - max));
      let percent = Math.max(0, 20 - Math.round((dist / maxDist) * 100));
      meterFill.style.width = percent + '%';
    }

    function showWin(){
      messageEl.textContent = `You guessed it! 🎉 The number was ${secret}.`;
      hintEl.textContent = `You had ${attemptsLeft} attempt(s) left.`;
      if (attemptsLeft > highscore) {
        highscore = attemptsLeft;
        highscoreEl.textContent = highscore;
      }
      meterFill.style.width = '100%';
    }

    function showLose(){
      messageEl.textContent = `Out of attempts — you lost. The number was ${secret}.`;
      hintEl.textContent = 'Press New Game to try again.';
      meterFill.style.width = '0%';
    }

    checkBtn.addEventListener('click', handleGuess);
    guessInput.addEventListener('keydown', (e)=>{ if(e.key === 'Enter') handleGuess(); });
    newBtn.addEventListener('click', ()=>resetGame(maxAttempts));

    applyRangeBtn.addEventListener('click', ()=>{
      const mn = parseInt(minRangeInput.value,10);
      const mx = parseInt(maxRangeInput.value,10);
      if (isNaN(mn) || isNaN(mx) || mn >= mx){
        alert('Please enter a valid range (min < max).');
        return;
      }
      min = mn; max = mx;
      const rangeSize = max - min + 1;
      maxAttempts = Math.max(5, Math.min(20, Math.round(Math.log2(rangeSize) * 3)));
      resetGame(maxAttempts);
    });

    function handleGuess(){
      const raw = guessInput.value.trim();
      if(raw === ''){ alert('Enter a number first.'); guessInput.focus(); return; }
      const guess = Number(raw);
      if (!Number.isFinite(guess) || guess < min || guess > max){
        alert(`Please enter a number between ${min} and ${max}.`);
        guessInput.focus();
        return;
      }

      // process guess
      if (attemptsLeft <= 0) { showLose(); return; }

      attemptsLeft--;
      attemptsText.textContent = attemptsLeft;

      if (guess === secret){
        showWin();
        return;
      }

      // give hint
      const diff = Math.abs(secret - guess);
      if (guess < secret){
        messageEl.textContent = 'Too low ⬇️';
      } else {
        messageEl.textContent = 'Too high ⬆️';
      }

      // temperature hint words
      let tempHint = '';
      if (diff <= Math.max(1, Math.round((max - min) * 0.02))) tempHint = 'Boiling 🔥';
      else if (diff <= Math.max(2, Math.round((max - min) * 0.05))) tempHint = 'Very hot 🔥';
      else if (diff <= Math.max(5, Math.round((max - min) * 0.12))) tempHint = 'Warm ♨️';
      else if (diff <= Math.max(10, Math.round((max - min) * 0.25))) tempHint = 'Cool ❄️';
      else tempHint = 'Cold 🧊';

      hintEl.textContent = `${tempHint} — ${Math.min(diff, max)} away.`;
      updateMeter(guess);

      if (attemptsLeft <= 0){
        showLose();
      } else {
        guessInput.value = '';
        guessInput.focus();
      }
    }

    // init
    resetGame(maxAttempts);
  })();
</script>
</body>
</html>
