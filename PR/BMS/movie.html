<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Movie Details</title>
  <link rel="stylesheet" href="styles.css" />
  <style>
    .details-wrap{max-width:1100px;margin:28px auto;padding:20px;display:grid;grid-template-columns:320px 1fr;gap:20px}
    .poster-large{width:100%;height:460px;border-radius:10px;overflow:hidden;background:#111;display:flex;align-items:center;justify-content:center}
    .poster-large img{width:100%;height:100%;object-fit:cover;display:block}
    .info h1{margin:0 0 8px 0}
    .info .meta{color:var(--muted);margin-bottom:12px}
    .info p{line-height:1.55}
    .back-btn{margin-bottom:12px;background:transparent;border:1px solid rgba(255,255,255,0.06);padding:8px;border-radius:8px;color:var(--muted);cursor:pointer}
    @media(max-width:900px){ .details-wrap{grid-template-columns:1fr; padding:12px} .poster-large{height:320px} }
  </style>
</head>
<body>
  <header class="topbar">
    <div style="display:flex;align-items:center;gap:12px;flex:1">
      <div class="logo">
        <div class="mark">B</div>
        <div>
          <div style="font-size:16px">BookMyShow</div>
          <div style="font-size:12px;color:var(--muted)">movie details</div>
        </div>
      </div>
    </div>
  </header>

  <main>
    <div class="details-wrap" id="detailsWrap"></div>

    <section style="padding:24px 20px">
      <h3>Other movies</h3>
      <div class="movies" id="otherMovies"></div>
    </section>
  </main>

  <footer>
    <div style="max-width:1100px;margin:0 auto;display:flex;justify-content:space-between;align-items:center;gap:20px;flex-wrap:wrap">
      <div>
        <strong>BookMyShow UI</strong>
        <div style="color:var(--muted);font-size:13px">Movie details.</div>
      </div>
      <div style="color:var(--muted);font-size:13px"> not a real ticketing site</div>
    </div>
  </footer>

  <script>
    const movies = [
      {title:'Avatar: The Way of Water',genre:'Sci-fi',rating:'UA', img:'images/avatar.jfif'},
      {title:'Interstellar',genre:'Sci-fi',rating:'UA', img:'images/insteller.webp'},
      {title:'Spider-Man: No Way Home',genre:'Action, Adventure',rating:'UA', img:'images/spider.webp'},
      {title:'The Hercules',genre:'Action, Crime',rating:'UA', img:'images/hercules.webp'},
      {title:'Dune',genre:'Sci-fi',rating:'UA', img:'images/dune.webp'},
      {title:'RRR',genre:'Drama, Action',rating:'UA', img:'images/rrr.jfif'},
      {title:'Jawan',genre:'Action, Thriller',rating:'UA', img:'images/jawan.jfif'},
      {title:'Ponniyin Selvan',genre:'Historical',rating:'U', img:'images/ponni.jfif'},
      {title:'lalo' , genre:'Historical' , rating:'U' , img:'images/lalo.avif'}
    ];

    function getQueryParam(name){
      const params = new URLSearchParams(window.location.search);
      return params.get(name);
    }

    const titleParam = getQueryParam('title');
    const movie = movies.find(m => m.title.toLowerCase() === (titleParam || '').toLowerCase());

    const wrap = document.getElementById('detailsWrap');

    if(!movie){
      wrap.innerHTML = `
        <div style="grid-column:1/-1;color:var(--muted);padding:30px;background:var(--card);border-radius:10px">
          <strong>Movie not found</strong>
          <div style="margin-top:8px">Try navigating from the home page or check the movie title in the URL.</div>
          <div style="margin-top:12px"><button class="back-btn" onclick="window.history.back()">Go back</button></div>
        </div>
      `;
    } else {
      wrap.innerHTML = `
        <div>
          <div class="poster-large"><img src="${movie.img}" alt="${movie.title}"></div>
        </div>
        <div class="info">
          <button class="back-btn" onclick="window.history.back()">← Back</button>
          <h1>${movie.title}</h1>
          <div class="meta">${movie.genre} • ${movie.rating}</div>
          <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. This is a description for "<strong>${movie.title}</strong>". Replace this with your real synopsis, cast, director, runtime and showtimes.</p>

          <div style="margin-top:16px;display:flex;gap:10px">
            <button class="btn" onclick="startBooking()">Book tickets</button>
            <button class="btn small" onclick="openTrailer()">Watch trailer</button>
          </div>

          <div id="extraInfo" style="margin-top:18px;color:var(--muted);font-size:14px"></div>
        </div>
      `;
    }

    // render other movies grid
    const otherGrid = document.getElementById('otherMovies');
    otherGrid.innerHTML = '';
    movies.forEach(m=>{
      if(movie && m.title === movie.title) return;
      const card = document.createElement('div');
      card.className = 'movie';
      card.innerHTML = `
        <div class="thumb"><img src="${m.img}" alt="${m.title}"></div>
        <h4>${m.title}</h4>
        <div class="meta">${m.genre} • ${m.rating}</div>
        <button class="book" data-book="${m.title}">View</button>
      `;
      otherGrid.appendChild(card);
    });

    // delegated clicks
    document.body.addEventListener('click', (e)=>{
      const t = e.target;
      if(t.matches('[data-book]')){
        window.location.href = `movie.html?title=${encodeURIComponent(t.getAttribute('data-book'))}`;
      }
      if(t.closest && t.closest('.thumb')){
        const thumbImg = t.closest('.thumb').querySelector('img');
        if(thumbImg && thumbImg.alt){
          window.location.href = `movie.html?title=${encodeURIComponent(thumbImg.alt)}`;
        }
      }
    });

    function startBooking(){
      alert('Start booking flow for: ' + (movie ? movie.title : ''));
    }
    function openTrailer(){
      alert('Open trailer (movie) for: ' + (movie ? movie.title : ''));
    }
  </script>
</body>
</html>
